== Using AWS RDS for PostgreSQL in place of default PostgreSQL DB

=== Pre-requisites
* AWS RDS for PostgreSQL is required to be up and running for this deployment. In case, you need to create new database, please refer link:https://www.mydatahack.com/how-to-launch-postgres-rds-with-aws-command-line-interface-cli/[CLI] or link:https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/CHAP_GettingStarted.CreatingConnecting.PostgreSQL.html[AWS Console].
* AWS CLI is to be installed. For installing, please refer this link:https://docs.aws.amazon.com/cli/latest/userguide/getting-started-install.html[link].

=== Steps
Here are the high level steps which are followed by AWS CLI Commands.

* Connect to AWS RDS for PostgreSQL.
* Create the database.
* Update the application.properties file and continue with the deployment steps.

```
#Connect to Azure from CLI (either local machine or VM)
az login

#Set the Azure Subscription in which Kubernetes Cluster presents
az account set --subscription <mySubscription>

#Connect to DB using the below format
psql --host=<dbserver-name>.postgres.database.azure.com --port=5432 --username=<admin-username>@<dbserver-name> --dbname=postgres

#Sample
psql --host=d4qdb.postgres.database.azure.com --port=5432 --username=devonadmin@d4qdb --dbname=postgres

#After logging into psql prompt, create the demo DB to use in our reference project
CREATE DATABASE demo;

```

* Update the application.properties file by changing the below section.

```
# Datasource configuration
quarkus.datasource.db-kind=postgresql
quarkus.datasource.jdbc.url=jdbc:postgresql://localhost:5432/demo
quarkus.datasource.username=demo
quarkus.datasource.password=********
```
* Sample for reference
```
# Datasource configuration
quarkus.datasource.db-kind=postgresql
quarkus.datasource.jdbc.url=jdbc:postgresql://d4qdb.postgres.database.azure.com:5432/demo
quarkus.datasource.username=devonadmin@d4qdb
quarkus.datasource.password=**********
```

* Continue with the deployment steps as per the main document.
